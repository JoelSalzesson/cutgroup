function color_for_value(e){var t=["#CCFFFF","#99CCCC","#669999","#336666","#003333"],n=_.sortBy(_.uniq(_.values(ward_signups)),function(e){return e});return n[0]==0&&n.shift(),index_of_val=_.indexOf(n,e),color_index=Math.floor(index_of_val/n.length*t.length),t[color_index]}function doMap(){layer=ward_map.getLayer("chicago");for(ward in ward_signups){var e=layer.getPaths({ward:ward}),t=e[0].svgPath.node;jQuery.data(t,"signups",ward_signups[e[0].data.ward]),jQuery.data(t,"ward",e[0].data.ward),jQuery.data(t,"displaynam",e[0].data.displaynam)}ward_map.getLayer("chicago").style({fill:function(e){return ward_signups[e.ward]==0?"#ccc":color_for_value(ward_signups[e.ward])}});var n="#ccc";$("path.chicago").each(function(e,t){$(t).bind("mouseenter",function(){$(t).data("previous-fill-color",$(t).attr("fill")),$(t).attr("fill",n)}),$(t).bind("mouseleave",function(){$(t).attr("fill",$(t).data("previous-fill-color"))});var r=$.data(t,"signups");$(t).tooltip({container:"body",animation:!1,placement:"left",title:$.data(t,"displaynam")+": "+(r||"0")+" tester"+(r==1?"":"s")})})}var ward_map,ward_signups;$(document).ready(function(){$("html.lt-ie9").length!=0?($("#ward-map-container").remove(),$("#main-body-copy").removeClass("span6").addClass("span12")):$.get("assets/js/signups.json",function(e){ward_signups=e,ward_map=$K.map("#ward-map"),ward_map.loadMap("assets/img/combined.svg",function(){ward_map.addLayer("chicago",{styles:{"stroke-width":"0.75px",fill:"#fff"}}),doMap()})})});